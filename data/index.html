<!DOCTYPE html>
<html lang="ua">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="normalize.css">
    <script src="https://unpkg.com/feather-icons"></script>
    <title>IoT platform</title>
</head>
<body onload="getJSON()">
    <div class="container">
        <div class="heading">
            <h1 class="heading__title"><span class="heading__title-selected">IoT</span> Platform</h1>
        </div>
        <div class="content">
            <h2 class="content__heading">Підключення до інтернету</h2>
            <div class="content__body">
                <div id="ssid_list" class="content__list"></div>
            </div>
            <button class="content__submit content__submit-active">
                Під'єднатися
            </button>
        </div>
    </div>
    <script>
        function getJSON(){
			var xmlhttp = new XMLHttpRequest();
			xmlhttp.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {
                    //obj = JSON.parse(this.responseText);
                    var data = JSON.parse(this.responseText);
                    for (var i = data["wifi"].length - 1; i >= 0; i--) {
                        var div_ssid = document.createElement('div');
                        div_ssid.className = "wifi-name";
                        div_ssid.innerHTML = data["wifi"][i]["ssid"];
                        document.getElementById('ssid_list').appendChild(div_ssid);
                        var div_class = document.createElement('div');
                        div_class.className = "wifi-icon";
                        div_class.className = "wifi-icon_active";
                        div_class.innerHTML = "<i data-feather='check'></i>";
                        document.getElementById('ssid_list').appendChild(div_class);

                    };
                };
			};

			xmlhttp.open("GET", '/scan_ssid.json', true);
			xmlhttp.send();
		}
    </script>
</body>
</html>